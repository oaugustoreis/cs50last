{% extends 'network/layout.html' %}

{% block body %}
  <h1>All Posts</h1>
  {% if user.is_authenticated %}
    <form action="{% url 'new_post' %}" method="post">
      {% csrf_token %}
      <div class="rounded my-3 mx-5 border py-2 px-3">
        <h3>New Post</h3>
        <textarea name="content" class="form-control my-2" placeholder="Leave a comment here"></textarea>
        <button type="submit" class="btn btn-primary">Post</button>
      </div>
    </form>
  {% endif %}

  <div class="all-posts">
    {% for post in allPosts %}
      <div class="post-card rounded my-3 mx-5 border py-2 px-3">
        <h3><a href="{% url 'profile' user_id=post.author.id %}">{{ post.author }}</a></h3>
        <p>{{ post.content }}</p>
        <p>{{ post.date }}</p>
      </div>
    {% endfor %}
  </div>
  <div>
    <nav aria-label="Page navigation example">
      <ul class="pagination">
        {% if allPosts.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page={{ allPosts.previous_page_number }}">Previous</a>
          </li>
        {% endif %}
        {% if allPosts.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ allPosts.next_page_number }}">Next</a>
          </li>
        {% endif %}
      </ul>
    </nav>
  </div>
{% endblock %}
